You are an expert in logic and formal methods. Your task is to translate the following US tax code section, 26 USC 152(a)-(d), into the SMT-LIB 2 format for use with the Z3 solver.

Legal Text:
(a)In general
For purposes of this subtitle, the term “dependent” means—
(1)a qualifying child, or
(2)a qualifying relative.
(b)Exceptions
For purposes of this section—
(1)Dependents ineligible
If an individual is a dependent of a taxpayer for any taxable year of such taxpayer beginning in a calendar year, such individual shall be treated as having no dependents for any taxable year of such individual beginning in such calendar year.

(2)Married dependents
An individual shall not be treated as a dependent of a taxpayer under subsection (a) if such individual has made a joint return with the individual’s spouse under section 6013 for the taxable year beginning in the calendar year in which the taxable year of the taxpayer begins.

(3)Citizens or nationals of other countries
(A)In general
The term “dependent” does not include an individual who is not a citizen or national of the United States unless such individual is a resident of the United States or a country contiguous to the United States.

(B)Exception for adopted child
Subparagraph (A) shall not exclude any child of a taxpayer (within the meaning of subsection (f)(1)(B)) from the definition of “dependent” if—
(i)for the taxable year of the taxpayer, the child has the same principal place of abode as the taxpayer and is a member of the taxpayer’s household, and
(ii)the taxpayer is a citizen or national of the United States.
(c)Qualifying child
For purposes of this section—
(1)In general
The term “qualifying child” means, with respect to any taxpayer for any taxable year, an individual—
(A)who bears a relationship to the taxpayer described in paragraph (2),
(B)who has the same principal place of abode as the taxpayer for more than one-half of such taxable year,
(C)who meets the age requirements of paragraph (3),
(D)who has not provided over one-half of such individual’s own support for the calendar year in which the taxable year of the taxpayer begins, and
(E)who has not filed a joint return (other than only for a claim of refund) with the individual’s spouse under section 6013 for the taxable year beginning in the calendar year in which the taxable year of the taxpayer begins.
(2)Relationship
For purposes of paragraph (1)(A), an individual bears a relationship to the taxpayer described in this paragraph if such individual is—
(A)a child of the taxpayer or a descendant of such a child, or
(B)a brother, sister, stepbrother, or stepsister of the taxpayer or a descendant of any such relative.
(3)Age requirements
(A)In general
For purposes of paragraph (1)(C), an individual meets the requirements of this paragraph if such individual is younger than the taxpayer claiming such individual as a qualifying child and—
(i)has not attained the age of 19 as of the close of the calendar year in which the taxable year of the taxpayer begins, or
(ii)is a student who has not attained the age of 24 as of the close of such calendar year.
(B)Special rule for disabled
In the case of an individual who is permanently and totally disabled (as defined in section 22(e)(3)) at any time during such calendar year, the requirements of subparagraph (A) shall be treated as met with respect to such individual.

(4)Special rule relating to 2 or more who can claim the same qualifying child
(A)In general
Except as provided in subparagraphs (B) and (C), if (but for this paragraph) an individual may be claimed as a qualifying child by 2 or more taxpayers for a taxable year beginning in the same calendar year, such individual shall be treated as the qualifying child of the taxpayer who is—
(i)a parent of the individual, or
(ii)if clause (i) does not apply, the taxpayer with the highest adjusted gross income for such taxable year.
(B)More than 1 parent claiming qualifying child
If the parents claiming any qualifying child do not file a joint return together, such child shall be treated as the qualifying child of—
(i)the parent with whom the child resided for the longest period of time during the taxable year, or
(ii)if the child resides with both parents for the same amount of time during such taxable year, the parent with the highest adjusted gross income.
(C)No parent claiming qualifying child
If the parents of an individual may claim such individual as a qualifying child but no parent so claims the individual, such individual may be claimed as the qualifying child of another taxpayer but only if the adjusted gross income of such taxpayer is higher than the highest adjusted gross income of any parent of the individual.

(d)Qualifying relative
For purposes of this section—
(1)In general
The term “qualifying relative” means, with respect to any taxpayer for any taxable year, an individual—
(A)who bears a relationship to the taxpayer described in paragraph (2),
(B)whose gross income for the calendar year in which such taxable year begins is less than the exemption amount (as defined in section 151(d)),
(C)with respect to whom the taxpayer provides over one-half of the individual’s support for the calendar year in which such taxable year begins, and
(D)who is not a qualifying child of such taxpayer or of any other taxpayer for any taxable year beginning in the calendar year in which such taxable year begins.
(2)Relationship
For purposes of paragraph (1)(A), an individual bears a relationship to the taxpayer described in this paragraph if the individual is any of the following with respect to the taxpayer:
(A)A child or a descendant of a child.
(B)A brother, sister, stepbrother, or stepsister.
(C)The father or mother, or an ancestor of either.
(D)A stepfather or stepmother.
(E)A son or daughter of a brother or sister of the taxpayer.
(F)A brother or sister of the father or mother of the taxpayer.
(G)A son-in-law, daughter-in-law, father-in-law, mother-in-law, brother-in-law, or sister-in-law.
(H)An individual (other than an individual who at any time during the taxable year was the spouse, determined without regard to section 7703, of the taxpayer) who, for the taxable year of the taxpayer, has the same principal place of abode as the taxpayer and is a member of the taxpayer’s household.
(3)Special rule relating to multiple support agreements
For purposes of paragraph (1)(C), over one-half of the support of an individual for a calendar year shall be treated as received from the taxpayer if—
(A)no one person contributed over one-half of such support,
(B)over one-half of such support was received from 2 or more persons each of whom, but for the fact that any such person alone did not contribute over one-half of such support, would have been entitled to claim such individual as a dependent for a taxable year beginning in such calendar year,
(C)the taxpayer contributed over 10 percent of such support, and
(D)each person described in subparagraph (B) (other than the taxpayer) who contributed over 10 percent of such support files a written declaration (in such manner and form as the Secretary may by regulations prescribe) that such person will not claim such individual as a dependent for any taxable year beginning in such calendar year.
(4)Special rule relating to income of handicapped dependents
(A)In general
For purposes of paragraph (1)(B), the gross income of an individual who is permanently and totally disabled (as defined in section 22(e)(3)) at any time during the taxable year shall not include income attributable to services performed by the individual at a sheltered workshop if—
(i)the availability of medical care at such workshop is the principal reason for the individual’s presence there, and
(ii)the income arises solely from activities at such workshop which are incident to such medical care.
(B)Sheltered workshop defined
For purposes of subparagraph (A), the term “sheltered workshop” means a school—
(i)which provides special instruction or training designed to alleviate the disability of the individual, and
(ii)which is operated by an organization described in section 501(c)(3) and exempt from tax under section 501(a), or by a State, a possession of the United States, any political subdivision of any of the foregoing, the United States, or the District of Columbia.
(5)Special rules for support
(A)In general
For purposes of this subsection—
(i)payments to a spouse of alimony or separate maintenance payments shall not be treated as a payment by the payor spouse for the support of any dependent, and
(ii)in the case of the remarriage of a parent, support of a child received from the parent’s spouse shall be treated as received from the parent.
(B)Alimony or separate maintenance payment
For purposes of subparagraph (A), the term “alimony or separate maintenance payment” means any payment in cash if—
(i)such payment is received by (or on behalf of) a spouse under a divorce or separation instrument (as defined in section 121(d)(3)(C)),
(ii)in the case of an individual legally separated from the individual’s spouse under a decree of divorce or of separate maintenance, the payee spouse and the payor spouse are not members of the same household at the time such payment is made, and
(iii)there is no liability to make any such payment for any period after the death of the payee spouse and there is no liability to make any payment (in cash or property) as a substitute for such payments after the death of the payee spouse.

Instructions:
1. First, analyze the text subsection by subsection ((a), (b), (c), (d)). For each subsection, break down the conditions and rules into clear logical statements (like "An individual is a dependent IF they are a qualifying child OR a qualifying relative, AND no exceptions apply").
2. Identify the key entities (e.g., Taxpayer, Potential Dependent) and the properties or relationships involved (e.g., age, relationship type, residency, support provided, income, citizenship, filing status).
3. Define necessary SMT functions (`declare-fun`). Use Boolean (`Bool`) type for conditions and relationships where possible. Use Integer (`Int`) for age and potentially income/support thresholds if necessary, but prefer Booleans for simplicity if exact values aren't crucial for the logic structure. Assume two main constants `TP` (Taxpayer) and `PD` (Potential Dependent) of a custom sort `Person`.
4. Translate the logical breakdown from step 1 into SMT-LIB assertions (`assert`) using logical connectives (`and`, `or`, `not`, `=>`).
5. Pay close attention to the structure:
    *   Overall definition of dependent (a).
    *   Exceptions that disqualify someone (b).
    *   Definition of qualifying child (c) with its multiple conditions (A-E) and sub-rules (relationships, age, tie-breakers).
    *   Definition of qualifying relative (d) with its multiple conditions (A-D) and sub-rules (relationships, income, support, non-QC status).
6. Acknowledge any complex parts you are simplifying (e.g., tie-breaker rules in (c)(4), multiple support agreements in (d)(3), exact dollar amounts). Focus on capturing the main logical structure first.

Provide the SMT-LIB code.